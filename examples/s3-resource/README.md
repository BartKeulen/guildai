# Guild Example: `s3-resource`

This example shows how S3 resources can be used in operations.

- [guild.yml](guild.yml) - Project Guild file
- [get-s3-file](get-s3-file) - Script to copy file from S3
- [process.py](process.py) - Script to process data

This example assumes access to S3 files by way of the the [*AWS
CLI*](https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html). Ensure
the CLI is installed on your system and that you have access to the
applicable S3 resource. Refer to [*Configuration and credential file
settings*](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html)
for details on configuing your S3 credentials.

The example uses two operations:

- `raw-data` - get raw data from S3
- `process` - process raw data

Run `raw-data` first to obtain the applicable data file from S3. This
operation assumes that you download a file that can be unpacked using
`tar` that contains one or more CSV files. The CSV files are processed
by the `process` operation.

    $ guild run raw-data bucket=<S3 bucket> path=<S3 path>

List the files downloaded and unpacked:

    $ guild ls

Note the downloaded TAR archive and any unpacked CSV files.

Next run `process` to process the raw data. The operation converts CSV
files to pickled Pandas dataframes.

    $ guild run process

By default, `process` uses files downloaded by the latest `raw-data`
run.

List the files generated by `process`:

    $ guild ls

Refer to [`guild.yml`](guild.yml) for the structure of this project.
