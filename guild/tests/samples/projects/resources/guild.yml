- model: resources
  resources:
    test:
      sources:
        # resource 0
        - file: archive1.zip
          sha256: 8d172fde27ec89ae0a76832f8ff714e3e498b23d14bac7edfb55e3c4729e3265
          select: a.txt
        # resource 1
        - file: archive2.tar
        # resource 2
        - file: archive3.tar
          unpack: no
        # resource 3
        - file: test.txt
          sha256: f33ae3bc9a22cd7564990a794789954409977013966fb1a8f43c35776b833a95
        # resource 4
        - file: badhash.txt
          sha256: xxx
        # resource 5
        - file: files
        # resource 6
        - file: files
          select: .+\.txt
        # resource 7
        - file: doesnt-exist
        # resource 8
        - file: test.txt
          rename:
            pattern: (.+)\.txt
            repl: \1.config
        # resource 9
        - file: foo
          select:
            - bar
            - a.txt
        # resource 10
        - file: foo.zip
          select:
            - foo/bar
            - foo/a.txt
        # resource 11
        - file: foo.zip
          select: .+\.txt

    test2:
      path: foo
      sources:
        - file: test.txt
        - file: files/a.bin
          path: bar

    test3:
      sources:
        - file: files
          # Fully specified rename (map)
          rename:
            pattern: files
            repl: all_files
        - file: files
          select: .+\.bin
          path: bin
          # Inline rename ('PATTERN REPL' string)
          rename: \.bin ''
        - file: archive1.zip
          select: .+\.txt
          path: archive1
          rename:
            pattern: (.+)\.txt
            repl: \g<1>2.txt
        - file: archive2.tar
          rename:
            pattern: (.+)
            repl: archive2_\1

    test4:
      sources:
        - config: config.yml
        - config: config.yml
          rename: config c2
        - config: config.yml
          path: c3
          params:
            a: 111
            c.d: 333

  operations:
    test4:
      main: guild.pass
      requires: test4
      flags:
        a: 11
        b: 22
        d:
          default: 33
          arg-name: c.d
