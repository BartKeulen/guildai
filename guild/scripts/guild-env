# -*-shell-script-*-

echo "=============="
echo $*
echo "=============="

_guild_env="$1"
if [ -z "$_guild_env" ]; then
    _guild_env=./env
fi

if [ ! -e "$_guild_env" ]; then
    echo "Guild environment $_guild_env does not exist"
    return 1
fi

if [ -e "$_guild_env/bin/activate" ]; then
    . "$_guild_env/bin/activate"
    clear
    echo "$VIRTUAL_ENV is active."
    echo
    echo "To deactivate the environment, run:"
    echo
    echo "  deactivate    Deactivate the environment"
    echo
    echo "Common commands:"
    echo
    echo "  guild check   Check the environment"
    echo "  guild ops     List available operations"
    echo "  guild runs    List runs"
    echo "  guild run     Run an operation"
    echo "  guild --help  Show Guild help"
    echo
else
    "Could not find a Guild environment in $_guild_env"
    return 1
fi
